(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),i=(a(16),a(10)),l=a(3),u=a(1),s=a(7),d=a.n(s);var m=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:d.a,alt:"Around the US Logo",className:"header__logo"}))},p=r.a.createContext({});var _=function(e){var t=r.a.useContext(p),a=e.card.owner._id===t._id,n=" button button__remove ".concat(a?" button__remove_visible":" button__remove_hidden"),c=e.card.likes.some((function(e){return e._id===t._id})),o="button button__like ".concat(c?" button__like_activated":"");return r.a.createElement("li",{className:"card__item"},r.a.createElement("button",{className:n,onClick:function(){e.handleDeleteCard(e.card)}}),r.a.createElement("div",{className:"card__image",onClick:e.handleCardClick,style:{backgroundImage:"url(".concat(e.src,")")}}),r.a.createElement("div",{className:"card__base"},r.a.createElement("h3",{className:"card__title"},e.name),r.a.createElement("div",{className:"card__likes"},r.a.createElement("button",{className:o,onClick:function(){e.handleCardLikeStatus(e.card)}}),r.a.createElement("p",{className:"card__like-count"},e.likes.length))))};var h=function(e){var t=r.a.useContext(p);return r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__image-section"},r.a.createElement("img",{src:t.avatar,className:"profile__image",alt:t.name}),r.a.createElement("button",{className:"profile__image_edit-button",onClick:e.handleEditAvatarClick})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h2",{className:"profile__name"},t.name),r.a.createElement("p",{className:"profile__occupation"},t.about)),r.a.createElement("button",{className:"button button__edit",onClick:e.handleEditProfileClick,"aria-label":"Edit Profile"}),r.a.createElement("button",{className:"button button__add","aria-label":"Add Picture Card",onClick:e.handleAddCardClick})),r.a.createElement("section",{className:"card"},r.a.createElement("ul",{className:"card__items"},e.cards.map((function(t,a){return r.a.createElement(_,{key:a,card:t,src:t.link,name:t.name,likes:t.likes,_id:t._id,owner:t.owner,handleDeleteCard:function(t){e.handleDeleteCard(t)},handleCardClick:function(){return e.handleCardClick(t.link,t.name)},handleCardLikeStatus:function(t){e.handleCardLikeStatus(t)}})})))))};var f=function(e){return r.a.createElement("section",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_active":"")},r.a.createElement("div",{className:"popup__container popup__container_type_".concat(e.name)},r.a.createElement("button",{className:"button button__close",onClick:e.onClose}),r.a.createElement("form",{action:"submit",onSubmit:e.onSubmit,className:"popup__form `popup__form_type_${props.name}`",noValidate:!0},r.a.createElement("h2",{className:"popup__title"},e.title),e.children,r.a.createElement("button",{type:"submit",className:"button button__submit button__submit_disabled"},e.buttonText))))};var v=function(e){var t=r.a.useContext(p),a=r.a.useState(""),n=Object(u.a)(a,2),c=n[0],o=n[1],i=r.a.useState(""),l=Object(u.a)(i,2),s=l[0],d=l[1];return r.a.createElement(f,{name:"edit-profile",title:"Edit Profile",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.handleUpdateProfile({name:c,about:s})}},r.a.createElement("input",{id:"profile-name",type:"text",placeholder:"Name",defaultValue:t.name,className:"popup__input popup__input_name",name:"name",required:!0,minLength:"2",maxLength:"40",onChange:function(e){o(e.target.value)}}),r.a.createElement("input",{id:"profile-occupation",type:"text",placeholder:"Occupation",defaultValue:t.about,className:"popup__input popup__input_occupation",name:"about",required:!0,minLength:"2",maxLength:"200",onChange:function(e){d(e.target.value)}}))};function b(e){var t=r.a.useRef();return r.a.createElement(f,{name:"edit-avatar",title:"Change Profile Picture",buttonText:"Save",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(a){a.preventDefault(),e.handleUpdateAvatar(t.current.value)}},r.a.createElement("input",{ref:t,id:"avatar-URL",type:"url",placeholder:"enter avatar link here",className:"popup__input popup__input_avatar-URL",name:"avatarURL",required:!0,minLength:"2"}),r.a.createElement("span",{id:"avatar-URL-error",className:"popup__error popup__error_visible"}))}function k(e){var t=r.a.useState(""),a=Object(u.a)(t,2),n=a[0],c=a[1],o=r.a.useState(""),i=Object(u.a)(o,2),l=i[0],s=i[1];return r.a.createElement(f,{name:"add-card",title:"New Place",buttonText:"Create",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.handleAddNewCard({name:n,link:l})}},r.a.createElement("input",{id:"card-title",type:"text",value:n,placeholder:"title",className:"popup__input popup__input_title",name:"name",required:!0,minLength:"1",maxLength:"30",onChange:function(e){c(e.target.value)}}),r.a.createElement("span",{id:"card-title-error",className:"popup__error popup__error_visible"}),r.a.createElement("input",{id:"card-url",type:"url",value:l,placeholder:"image link",className:"popup__input popup__input_image-link",name:"link",required:!0,onChange:function(e){s(e.target.value)}}),r.a.createElement("span",{id:"card-url-error",className:"popup__error popup__error_visible"}))}var E=function(e){return r.a.createElement("section",{className:"popup popup_type_image ".concat(e.isOpen?"popup_active":""),onClick:e.onClose},r.a.createElement("div",{className:"popup__container popup__container_type_image"},r.a.createElement("button",{className:"button button__close",onClick:e.onClose}),r.a.createElement("figure",{className:"popup__figure"},r.a.createElement("img",{className:"popup__image",alt:e.name,src:e.link}),r.a.createElement("figcaption",{className:"popup__caption"},e.name))))};var C=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Cayla Mello"))},g=a(8),N=a(9),O=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(g.a)(this,e),this._baseUrl=a,this._headers=n}return Object(N.a)(e,[{key:"_checkRes",value:function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText+e.status)}},{key:"getCardList",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(t){return e._checkRes(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(t){return e._checkRes(t)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getCardList()])}},{key:"addCard",value:function(e){var t=this,a=e.name,n=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:a,link:n})}).then((function(e){return t._checkRes(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkRes(e)}))}},{key:"cardLikeAdd",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return t._checkRes(e)}))}},{key:"cardLikeRemove",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkRes(e)}))}},{key:"setUserInfo",value:function(e){var t=this,a=e.name,n=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:a,about:n})}).then((function(e){return t._checkRes(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,a=e.avatar;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:a})}).then((function(e){return t._checkRes(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-5",headers:{authorization:"6eeb54a7-daa3-4961-9f3b-d820b89ec651","Content-Type":"application/json"}});var y=function(){var e=r.a.useState({}),t=Object(u.a)(e,2),a=t[0],n=t[1];r.a.useEffect((function(){O.getUserInfo().then((function(e){n(e)})).catch((function(e){return console.log(e)}))}),[]);var c=r.a.useState([]),o=Object(u.a)(c,2),s=o[0],d=o[1];r.a.useEffect((function(){O.getCardList().then((function(e){d(e.map((function(e){return{link:e.link,name:e.name,likes:e.likes,_id:e._id,owner:e.owner}})))})).catch((function(e){return console.log(e)}))}),[]);var _=r.a.useState(!1),g=Object(u.a)(_,2),N=g[0],y=g[1],S=r.a.useState(!1),U=Object(u.a)(S,2),L=U[0],j=U[1],x=r.a.useState(!1),A=Object(u.a)(x,2),w=A[0],P=A[1],R=r.a.useState(!1),T=Object(u.a)(R,2),D=T[0],I=T[1],q=r.a.useState(!1),J=Object(u.a)(q,2),V=J[0],B=J[1];function H(e){y(!1),j(!1),P(!1),I(!1),B(!1)}var M=r.a.useState(""),W=Object(u.a)(M,2),$=W[0],z=W[1],Y=r.a.useState(""),F=Object(u.a)(Y,2),G=F[0],K=F[1];function Q(e){O.removeCard(e._id).then((function(){var t=s.filter((function(t){return t._id!==e._id}));d(t)})).catch((function(e){return console.log(e)}))}return r.a.createElement(p.Provider,{value:a},r.a.createElement("div",{className:"page"},r.a.createElement(m,null),r.a.createElement(h,{handleEditAvatarClick:function(e){y(!0)},handleEditProfileClick:function(e){j(!0)},handleAddCardClick:function(e){P(!0)},handleDeleteCard:function(e){Q(e)},handleCardClick:function(e,t){!function(e,t){z(e),K(t),B(!0)}(e,t)},cards:s,handleCardLikeStatus:function(e){return function(e){(!1===e.likes.some((function(e){return e._id===a._id}))?O.cardLikeAdd(e._id):O.cardLikeRemove(e._id)).then((function(t){var a=s.map((function(a){return a._id===e._id?t:a}));d(a)})).catch((function(e){return console.log(e)}))}(e)}}),r.a.createElement(b,{isOpen:N,onClose:H,handleUpdateAvatar:function(e){O.setUserAvatar({avatar:e}).then((function(e){n(Object(l.a)(Object(l.a)({},n),{},{avatar:e.avatar,name:e.name,about:e.about}))})).then((function(){H()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(v,{isOpen:L,onClose:H,handleUpdateProfile:function(e){O.setUserInfo(e).then((function(e){n(Object(l.a)(Object(l.a)({},n),{},{name:e.name,about:e.about,avatar:e.avatar}))})).then((function(){H()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(k,{isOpen:w,onClose:H,handleAddNewCard:function(e){O.addCard(e).then((function(e){return d([].concat(Object(i.a)(s),[e]))})).then((function(){H()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(f,{name:"delete",title:"Are you sure?",buttonText:"Yes",isOpen:D,onClose:H,onClick:Q}),r.a.createElement(E,{link:$,name:G,isOpen:V,onClose:H}),r.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.801271e5.chunk.js.map